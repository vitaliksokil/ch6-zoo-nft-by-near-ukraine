"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[859],{9859:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}});var o=r(3396),i=r(9242),n=r(7139);const s={class:"p-5 rounded"},a={key:0,class:"bg-white p-3 rounded"},l={class:"mb-3"},d=(0,o._)("label",{for:"title",class:"form-label"},"Title",-1),m=["textContent"],c={class:"mb-3"},f=(0,o._)("label",{for:"description",class:"form-label"},"Description",-1),u=["textContent"],h={class:"mb-3"},p=(0,o._)("label",{for:"address",class:"form-label"},"Address",-1),g=["textContent"],b={class:"mb-3"},w=(0,o._)("label",{for:"banner_image",class:"form-label"},"Banner Image",-1),_=["textContent"],y=["src"],x={class:"mb-3"},C=(0,o._)("label",{for:"nft_price",class:"form-label"},"NFT price",-1),k=["textContent"],v={key:1,class:"alert alert-warning",role:"alert"},Z=(0,o._)("p",{class:"text-center"},"You have not created zoo yet.",-1),I=[Z];function D(e,t,r,Z,D,z){return(0,o.wg)(),(0,o.iD)("div",s,[D.myZoo?((0,o.wg)(),(0,o.iD)("form",a,[(0,o._)("div",l,[d,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>D.form.title=e)},null,512),[[i.nr,D.form.title]]),D.form.errors().has("title")?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"form-text text-danger",textContent:(0,n.zw)(D.form.errors().get("title"))},null,8,m)):(0,o.kq)("",!0)]),(0,o._)("div",c,[f,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":t[1]||(t[1]=e=>D.form.description=e)},null,512),[[i.nr,D.form.description]]),D.form.errors().has("description")?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"form-text text-danger",textContent:(0,n.zw)(D.form.errors().get("description"))},null,8,u)):(0,o.kq)("",!0)]),(0,o._)("div",h,[p,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":t[2]||(t[2]=e=>D.form.address=e)},null,512),[[i.nr,D.form.address]]),D.form.errors().has("address")?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"form-text text-danger",textContent:(0,n.zw)(D.form.errors().get("address"))},null,8,g)):(0,o.kq)("",!0)]),(0,o._)("div",b,[w,(0,o._)("input",{type:"file",class:"form-control",id:"banner_image",onChange:t[3]||(t[3]=(...e)=>z.bannerImageOnChange&&z.bannerImageOnChange(...e)),required:""},null,32),D.form.errors().has("banner_image")?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"form-text text-danger",textContent:(0,n.zw)(D.form.errors().get("banner_image"))},null,8,_)):(0,o.kq)("",!0),(0,o._)("img",{class:"my-4",width:"350",src:D.form.banner_image},null,8,y)]),(0,o._)("div",x,[C,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"nft_price",placeholder:"â“ƒ","onUpdate:modelValue":t[4]||(t[4]=e=>D.form.nft_price=e)},null,512),[[i.nr,D.form.nft_price]]),D.form.errors().has("nft_price")?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"form-text text-danger",textContent:(0,n.zw)(D.form.errors().get("nft_price"))},null,8,k)):(0,o.kq)("",!0)]),(0,o._)("button",{type:"submit",class:"btn btn-primary",onClick:t[5]||(t[5]=(0,i.iM)(((...e)=>z.submit&&z.submit(...e)),["prevent"]))},"Submit")])):(0,o.kq)("",!0),D.myZoo?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",v,I))])}var z=r(2478),O=r.n(z),q=r(5648),J=r.n(q),M=r(5892),F=r(4938);const S=J()(3).times(10**13).toFixed();var U={name:"CreateZoo",data(){return{myZoo:{},form:O()({title:"",description:"",address:"",banner_image:"",nft_price:""}).rules({title:"min:3|required|max:1000|string",description:"required|min:5|max:2000|string",address:"required|min:5|max:2000|string",banner_image:"required|string",nft_price:"required|numeric"})}},methods:{async fileOnChange(e){let t=this.$loading.show();const r=e.target.files[0],o=new M.j3({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDREZWI3ZDExMzFiOTE1ODBFQUIxM0EzRjM4OEEyMGYzMjJCODc4RTQiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTY1MDU1OTgxMjE4OSwibmFtZSI6Im5mdC1vbmUtcGxzLW9uZSJ9.jOjLKV80kDJNLj9QStwbd-DovDaCAzpQW2HUupuzv-8"}),i=await o.storeBlob(r),n="https://ipfs.io/ipfs/"+i;return t.hide(),n},async bannerImageOnChange(e){this.form.banner_image=await this.fileOnChange(e)},submit(){return this.form.validate(),this.form.errors().any()?this.failed():this.passed()},failed(){console.log("errors: ",this.form.errors().all())},async updateZoo(e,t,r,o,i){await window.walletSelector.signAndSendTransaction({signerId:window.nearAccount.accountId,actions:[{type:"FunctionCall",params:{methodName:"update_zoo",args:{zoo_id:this.myZoo.owner_id,title:e,description:t,address:r,banner_image:o,nft_price:J()(i).times(10**24).toFixed()},gas:S,deposit:0}}]}).catch((e=>{throw console.log("Failed"),e}))},async passed(){let e=this.$loading.show();try{await this.updateZoo(this.form.title,this.form.description,this.form.address,this.form.banner_image,this.form.nft_price),this.$swal.fire({icon:"success",title:"Success",text:"Your Zoo has been updated!",footer:""})}catch(t){console.log(t.message),this.$swal.fire({icon:"error",title:"Error",text:t.message})}e.hide()}},async mounted(){let e=this.$loading.show();try{this.myZoo=await(0,F.Ke)(window.nearAccount.accountId),this.form.title=this.myZoo.title,this.form.description=this.myZoo.description,this.form.address=this.myZoo.address,this.form.banner_image=this.myZoo.banner_image,this.form.nft_price=this.$filters.transformYoctoNear(this.myZoo.nft_price)}catch(t){this.myZoo=!1}e.hide()}},j=r(89);const E=(0,j.Z)(U,[["render",D]]);var T=E}}]);
//# sourceMappingURL=859.d18e6a95.js.map