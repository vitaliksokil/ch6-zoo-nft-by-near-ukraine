"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[906],{7906:function(e,t,r){r.r(t),r.d(t,{default:function(){return V}});var n=r(3396),i=r(9242),o=r(7139);const s={class:"p-5 rounded"},a={key:0,class:"bg-white p-3 rounded"},l={class:"mb-3"},d=(0,n._)("label",{for:"title",class:"form-label"},"Title",-1),m=["textContent"],c={class:"mb-3"},f=(0,n._)("label",{for:"description",class:"form-label"},"Description",-1),u=["textContent"],p={class:"mb-3"},g=(0,n._)("label",{for:"address",class:"form-label"},"Address",-1),h=["textContent"],_={class:"mb-3"},b=(0,n._)("label",{for:"banner_image",class:"form-label"},"Banner Image",-1),w=["textContent"],y=["src"],x={class:"mb-3"},C=(0,n._)("label",{for:"nft_media",class:"form-label"},"NFT Media",-1),v=["textContent"],k=["src"],Z={class:"mb-3"},I=(0,n._)("label",{for:"nft_price",class:"form-label"},"NFT price",-1),z=["textContent"],D=["disabled"],O={key:1,class:"alert alert-warning",role:"alert"},q=(0,n._)("p",{class:"mb-4 text-center"},"You have been already create your zoo! You can update its info or look at this.",-1),M={class:"row justify-content-center"};function F(e,t,r,F,U,J){const j=(0,n.up)("zoo-list-item-component");return(0,n.wg)(),(0,n.iD)("div",s,[U.myZoo?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("form",a,[(0,n._)("div",l,[d,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>U.form.title=e)},null,512),[[i.nr,U.form.title]]),U.form.errors().has("title")?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"form-text text-danger",textContent:(0,o.zw)(U.form.errors().get("title"))},null,8,m)):(0,n.kq)("",!0)]),(0,n._)("div",c,[f,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":t[1]||(t[1]=e=>U.form.description=e)},null,512),[[i.nr,U.form.description]]),U.form.errors().has("description")?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"form-text text-danger",textContent:(0,o.zw)(U.form.errors().get("description"))},null,8,u)):(0,n.kq)("",!0)]),(0,n._)("div",p,[g,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":t[2]||(t[2]=e=>U.form.address=e)},null,512),[[i.nr,U.form.address]]),U.form.errors().has("address")?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"form-text text-danger",textContent:(0,o.zw)(U.form.errors().get("address"))},null,8,h)):(0,n.kq)("",!0)]),(0,n._)("div",_,[b,(0,n._)("input",{type:"file",class:"form-control",id:"banner_image",onChange:t[3]||(t[3]=(...e)=>J.bannerImageOnChange&&J.bannerImageOnChange(...e)),required:""},null,32),U.form.errors().has("banner_image")?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"form-text text-danger",textContent:(0,o.zw)(U.form.errors().get("banner_image"))},null,8,w)):(0,n.kq)("",!0),(0,n._)("img",{class:"my-4",width:"350",src:U.form.banner_image},null,8,y)]),(0,n._)("div",x,[C,(0,n._)("input",{type:"file",class:"form-control",id:"nft_media",onChange:t[4]||(t[4]=(...e)=>J.nftMediaOnChange&&J.nftMediaOnChange(...e)),required:""},null,32),U.form.errors().has("nft_media")?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"form-text text-danger",textContent:(0,o.zw)(U.form.errors().get("nft_media"))},null,8,v)):(0,n.kq)("",!0),(0,n._)("img",{class:"my-4",width:"350",src:U.form.nft_media},null,8,k)]),(0,n._)("div",Z,[I,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",id:"nft_price",placeholder:"â“ƒ","onUpdate:modelValue":t[5]||(t[5]=e=>U.form.nft_price=e)},null,512),[[i.nr,U.form.nft_price]]),U.form.errors().has("nft_price")?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"form-text text-danger",textContent:(0,o.zw)(U.form.errors().get("nft_price"))},null,8,z)):(0,n.kq)("",!0)]),(0,n._)("button",{type:"submit",class:"btn btn-primary",disabled:U.form.empty(),onClick:t[6]||(t[6]=(0,i.iM)(((...e)=>J.submit&&J.submit(...e)),["prevent"]))},"Submit",8,D)])),U.myZoo?((0,n.wg)(),(0,n.iD)("div",O,[q,(0,n._)("div",M,[(0,n.Wm)(j,{id:U.myZoo.owner_id,title:U.myZoo.title,banner_image:U.myZoo.banner_image,description:U.myZoo.description},null,8,["id","title","banner_image","description"])])])):(0,n.kq)("",!0)])}var U=r(4938),J=r(2478),j=r.n(J),S=r(5648),E=r.n(S),T=r(5892),W=r(9429);const A=E()(3).times(10**13).toFixed();var L={name:"CreateZoo",components:{ZooListItemComponent:W.Z},data(){return{myZoo:{},form:j()({title:"",description:"",address:"",banner_image:"",nft_media:"",nft_price:""}).rules({title:"min:3|required|max:1000|string",description:"required|min:5|max:2000|string",address:"required|min:5|max:2000|string",banner_image:"required|string",nft_media:"required|string",nft_price:"required|numeric"})}},methods:{async fileOnChange(e){let t=this.$loading.show();const r=e.target.files[0],n=new T.j3({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDREZWI3ZDExMzFiOTE1ODBFQUIxM0EzRjM4OEEyMGYzMjJCODc4RTQiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTY1MDU1OTgxMjE4OSwibmFtZSI6Im5mdC1vbmUtcGxzLW9uZSJ9.jOjLKV80kDJNLj9QStwbd-DovDaCAzpQW2HUupuzv-8"}),i=await n.storeBlob(r),o="https://ipfs.io/ipfs/"+i;return t.hide(),o},async nftMediaOnChange(e){this.form.nft_media=await this.fileOnChange(e)},async bannerImageOnChange(e){this.form.banner_image=await this.fileOnChange(e)},cleanUpForm(){this.form.title="",this.form.description="",this.form.address="",this.form.banner_image="",this.form.nft_media="",this.form.nft_price=""},submit(){return this.form.validate(),this.form.errors().any()?this.failed():this.passed()},failed(){console.log("errors: ",this.form.errors().all())},async createZoo(e,t,r,n,i,o){await window.walletSelector.signAndSendTransaction({signerId:window.nearAccount.accountId,actions:[{type:"FunctionCall",params:{methodName:"add_new_zoo",args:{title:e,description:t,address:r,banner_image:n,nft_media:i,nft_price:E()(o).times(10**24).toFixed()},gas:A,deposit:0}}]}).catch((e=>{throw console.log("Failed"),e}))},async passed(){let e=this.$loading.show();try{await this.createZoo(this.form.title,this.form.description,this.form.address,this.form.banner_image,this.form.nft_media,this.form.nft_price),this.myZoo=await(0,U.Ke)(window.nearAccount.accountId),this.$swal.fire({icon:"success",title:"Success",text:"Your Zoo has been created!",footer:""}),this.cleanUpForm()}catch(t){console.log(t.message),this.$swal.fire({icon:"error",title:"Error",text:t.message})}e.hide()}},async mounted(){let e=this.$loading.show();try{this.myZoo=await(0,U.Ke)(window.nearAccount.accountId)}catch(t){this.myZoo=!1}e.hide()}},Q=r(89);const R=(0,Q.Z)(L,[["render",F]]);var V=R},9429:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(3396),i=r(7139);const o={class:"col-lg-6"},s=["href","onClick"],a={class:"caption"},l={class:"caption-content"},d={class:"h2"},m={class:"mb-0"},c=["src","alt"];function f(e,t,r,f,u,p){const g=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(g,{to:{name:"zoo-single",params:{id:`${r.id}`}},custom:""},{default:(0,n.w5)((({href:e,navigate:t})=>[(0,n._)("a",{class:"portfolio-item",href:e,onClick:t},[(0,n._)("div",a,[(0,n._)("div",l,[(0,n._)("div",d,(0,i.zw)(r.title),1),(0,n._)("p",m,(0,i.zw)(r.description),1)])]),(0,n._)("img",{class:"img-fluid",src:r.banner_image,alt:r.title,style:{height:"300px",width:"100%"}},null,8,c)],8,s)])),_:1},8,["to"])])}var u={name:"ZooListItemComponent",props:["id","title","banner_image","description"]},p=r(89);const g=(0,p.Z)(u,[["render",f]]);var h=g}}]);
//# sourceMappingURL=906.e3676cf6.js.map