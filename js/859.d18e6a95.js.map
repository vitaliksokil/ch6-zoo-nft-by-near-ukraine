{"version":3,"file":"js/859.d18e6a95.js","mappings":"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","sources":["webpack://frontend/./src/components/Pages/Profile/UpdateZoo.vue","webpack://frontend/./src/components/Pages/Profile/UpdateZoo.vue?0c4f"],"sourcesContent":["<template>\n  <div class=\" p-5 rounded\">\n    <form class=\"bg-white p-3 rounded\" v-if=\"myZoo\">\n      <div class=\"mb-3\">\n        <label for=\"title\" class=\"form-label\">Title</label>\n        <input type=\"text\" class=\"form-control\" id=\"title\" v-model='form.title'>\n        <div class=\"form-text text-danger\" v-if=\"form.errors().has('title')\" v-text=\"form.errors().get('title')\"></div>\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"description\" class=\"form-label\">Description</label>\n        <input type=\"text\" class=\"form-control\" id=\"description\" v-model='form.description'>\n        <div class=\"form-text text-danger\" v-if=\"form.errors().has('description')\"\n             v-text=\"form.errors().get('description')\"></div>\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"address\" class=\"form-label\">Address</label>\n        <input type=\"text\" class=\"form-control\" id=\"address\" v-model='form.address'>\n        <div class=\"form-text text-danger\" v-if=\"form.errors().has('address')\"\n             v-text=\"form.errors().get('address')\"></div>\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"banner_image\" class=\"form-label\">Banner Image</label>\n        <input type=\"file\" class=\"form-control\" id=\"banner_image\" @change=\"bannerImageOnChange\" required>\n        <div class=\"form-text text-danger\" v-if=\"form.errors().has('banner_image')\"\n             v-text=\"form.errors().get('banner_image')\"></div>\n        <img class=\"my-4\" width=\"350\" :src=\"form.banner_image\"/>\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"nft_price\" class=\"form-label\">NFT price</label>\n        <input type=\"text\" class=\"form-control\" id=\"nft_price\" placeholder=\"â“ƒ\" v-model='form.nft_price'>\n        <div class=\"form-text text-danger\" v-if=\"form.errors().has('nft_price')\"\n             v-text=\"form.errors().get('nft_price')\"></div>\n      </div>\n\n      <button type=\"submit\" class=\"btn btn-primary\"  @click.prevent='submit'>Submit</button>\n    </form>\n    <div class=\"alert alert-warning \" role=\"alert\" v-if=\"!myZoo\">\n      <p class=\"text-center\">You have not created zoo yet.</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport form from 'vuejs-form'\nimport Big from \"big.js\";\nimport { NFTStorage } from 'nft.storage'\nimport {getZooById} from \"@/utils\";\n\nconst BOATLOAD_OF_GAS = Big(3).times(10 ** 13).toFixed();\n\nexport default {\n  name: \"CreateZoo\",\n  data(){\n    return {\n      myZoo:{},\n      form: form({\n        title: '',\n        description: '',\n        address: '',\n        banner_image: '',\n        nft_price: '',\n      }).rules({\n        title: 'min:3|required|max:1000|string',\n        description: 'required|min:5|max:2000|string',\n        address: 'required|min:5|max:2000|string',\n        banner_image: 'required|string',\n        nft_price: 'required|numeric',\n          })\n    }\n  },\n  methods:{\n    async fileOnChange(e) {\n      let loader = this.$loading.show();\n      /* upload image to IPFS */\n      const file = e.target.files[0];\n      const client = new NFTStorage({token: process.env.VUE_APP_NFT_STORAGE_TOKEN});\n      const metadataCid = await client.storeBlob(file)\n      const metadataUrl = \"https://ipfs.io/ipfs/\" + metadataCid;\n      loader.hide();\n      return metadataUrl;\n    },\n    async bannerImageOnChange(e) {\n      this.form.banner_image = await this.fileOnChange(e);\n    },\n    submit() {\n      this.form.validate()\n      return this.form.errors().any() ? this.failed() : this.passed();\n    },\n    failed() {\n      console.log('errors: ', this.form.errors().all());\n    },\n\n    async updateZoo(\n        title,\n        description,\n        address,\n        banner_image,\n        nft_price,\n    ) {\n      await window.walletSelector.signAndSendTransaction({\n        signerId: window.nearAccount.accountId,\n        // receiverId: nearConfig.contractName,\n        actions:[\n          {\n            type: \"FunctionCall\",\n            params: {\n              methodName: \"update_zoo\",\n              args: {\n                \"zoo_id\": this.myZoo.owner_id,\n                \"title\": title,\n                \"description\": description,\n                \"address\": address,\n                \"banner_image\": banner_image,\n                \"nft_price\": Big(nft_price).times(10 ** 24).toFixed(),\n              },\n              gas: BOATLOAD_OF_GAS,\n              deposit: 0\n            },\n          },\n        ]\n      }).catch((err) => {\n        console.log(\"Failed\");\n        throw err;\n      });\n    },\n    async passed() {\n      let loader = this.$loading.show();\n      try {\n        await this.updateZoo(\n            this.form.title,\n            this.form.description,\n            this.form.address,\n            this.form.banner_image,\n            this.form.nft_price,\n        );\n        this.$swal.fire({\n          icon: 'success',\n          title: 'Success',\n          text: 'Your Zoo has been updated!',\n          footer: ``,\n        })\n      }catch (error){\n        console.log(error.message);\n        this.$swal.fire({\n          icon: 'error',\n          title: 'Error',\n          text: error.message,\n        })\n\n      }\n      loader.hide();\n    }\n\n  },\n  async mounted() {\n    let loader = this.$loading.show();\n    try {\n      this.myZoo = await getZooById(window.nearAccount.accountId);\n\n      this.form.title = this.myZoo.title;\n      this.form.description = this.myZoo.description;\n      this.form.address = this.myZoo.address;\n      this.form.banner_image = this.myZoo.banner_image;\n      this.form.nft_price = this.$filters.transformYoctoNear(this.myZoo.nft_price);\n\n    } catch (error) {\n      this.myZoo = false;\n    }\n    loader.hide();\n  }\n}\n</script>\n\n<style scoped>\n\n</style>","import { render } from \"./UpdateZoo.vue?vue&type=template&id=b4570d72\"\nimport script from \"./UpdateZoo.vue?vue&type=script&lang=js\"\nexport * from \"./UpdateZoo.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/var/www/near-ch-6/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","role","_hoisted_20","_createElementBlock","$data","_hoisted_4","type","id","title","$event","errors","has","_toDisplayString","get","_hoisted_7","description","_hoisted_10","address","_hoisted_13","onChange","$options","required","width","src","banner_image","_hoisted_17","placeholder","nft_price","onClick","_hoisted_21","BOATLOAD_OF_GAS","Big","times","toFixed","name","data","myZoo","form","rules","methods","async","e","loader","this","$loading","show","file","target","files","client","NFTStorage","token","process","metadataCid","storeBlob","metadataUrl","hide","fileOnChange","submit","validate","any","failed","passed","console","log","all","window","walletSelector","signAndSendTransaction","signerId","nearAccount","accountId","actions","params","methodName","args","owner_id","gas","deposit","catch","err","updateZoo","$swal","fire","icon","text","footer","error","message","getZooById","$filters","transformYoctoNear","__exports__","render"],"sourceRoot":""}